<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="5320px" preserveAspectRatio="none" style="width:1602px;height:5320px;background:#FFFFFF;" version="1.1" viewBox="0 0 1602 5320" width="1602px" zoomAndPan="magnify"><defs/><g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="329" x2="329" y1="52.5938" y2="5313.9922"/><rect fill="#1E90FF" height="5248.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="324" y="60.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="474" x2="474" y1="52.5938" y2="5313.9922"/><rect fill="#1E90FF" height="5132.6016" style="stroke:#181818;stroke-width:1.0;" width="10" x="469" y="81.7266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="715" x2="715" y1="52.5938" y2="5313.9922"/><rect fill="#1E90FF" height="54.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="710" y="2740.7266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="849" x2="849" y1="52.5938" y2="5313.9922"/><rect fill="#1E90FF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="844" y="775.2422"/><rect fill="#1E90FF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="844" y="1640.5547"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="964.5" x2="964.5" y1="52.5938" y2="5313.9922"/><rect fill="#1E90FF" height="54.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="959.5" y="1910.1484"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1072" x2="1072" y1="52.5938" y2="5313.9922"/><rect fill="#1E90FF" height="118.7969" style="stroke:#181818;stroke-width:1.0;" width="10" x="1067" y="1235.2969"/><rect fill="#1E90FF" height="103.6641" style="stroke:#181818;stroke-width:1.0;" width="10" x="1067" y="4238.2188"/><rect fill="#1E90FF" height="103.6641" style="stroke:#181818;stroke-width:1.0;" width="10" x="1067" y="4830.0703"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="43" x="307.5" y="21.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="314.5" y="41.292">POS</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="69" x="439.5" y="21.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="446.5" y="41.292">mil-auth</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="149" x="640.5" y="21.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135" x="647.5" y="41.292">mil-terminal-registry</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99" x="799.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="806.5" y="24.9951">Azure Active</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="818" y="41.292">Directory</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112" x="908.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="915.5" y="24.9951">Azure Storage</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="936" y="41.292">Account</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="83" x="1030.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="1037.5" y="24.9951">Azure Key</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="34" x="1055" y="41.292">Vault</text><polygon fill="#181818" points="457,77.7266,467,81.7266,457,85.7266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="334" x2="463" y1="81.7266" y2="81.7266"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="9" x="356" y="76.6606">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34" x="369" y="76.6606">POST</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="403" y="76.6606">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40" x="407" y="76.6606">/token</text><path d="M91,65.5938 L91,173.5938 L324,173.5938 L324,75.5938 L314,65.5938 L91,65.5938 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M314,65.5938 L314,75.5938 L324,75.5938 L314,65.5938 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="97" y="97.7935">RequestId:</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="86" x="168" y="97.7935">&lt;request id&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="92" x2="185" y1="78.1602" y2="78.1602"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45" x="185" y="82.1606">header</text><line style="stroke:#181818;stroke-width:0.5;" x1="230" x2="323" y1="78.1602" y2="78.1602"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="97" y="132.0591">grant_type=refresh_token&amp;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63" x="97" y="147.1919">client_id=</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="71" x="160" y="147.1919">&lt;client id&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="11" x="231" y="147.1919">&amp;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="97" y="162.3247">refresh_token=</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="107" x="196" y="162.3247">&lt;refresh token&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="92" x2="192" y1="112.4258" y2="112.4258"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31" x="192" y="116.4263">body</text><line style="stroke:#181818;stroke-width:0.5;" x1="223" x2="323" y1="112.4258" y2="112.4258"/><path d="M49,183.3906 L240,183.3906 L240,190.5234 L230,200.5234 L49,200.5234 L49,183.3906 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="1298.3672" style="stroke:#000000;stroke-width:1.5;" width="1220" x="49" y="183.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="146" x="64" y="196.4575">verify refresh token</text><path d="M319,215.5234 L319,509.5234 L629,509.5234 L629,225.5234 L619,215.5234 L319,215.5234 " fill="#90EE90" style="stroke:#181818;stroke-width:0.5;"/><path d="M619,215.5234 L619,225.5234 L629,225.5234 L619,215.5234 " fill="#90EE90" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="325" y="247.7231">base64url(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="107" x="393" y="247.7231">&lt;token header&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="500" y="247.7231">) + "." +</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="325" y="262.856">base64url(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="162" x="393" y="262.856">&lt;refresh token payload&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="555" y="262.856">) + "." +</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="254" x="325" y="277.9888">&lt;base64url of refresh token signature&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="320" x2="420.5" y1="228.0898" y2="228.0898"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="107" x="420.5" y="232.0903">&lt;refresh token&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="527.5" x2="628" y1="228.0898" y2="228.0898"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="325" y="312.2544">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="41" x="357" y="327.3872">"kid": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="86" x="398" y="327.3872">&lt;key name&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="100" x="484" y="327.3872">/&lt;key version&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="584" y="327.3872">",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="357" y="342.52">"alg": "RS256"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="325" y="357.6528">}</text><line style="stroke:#181818;stroke-width:0.5;" x1="320" x2="420.5" y1="292.6211" y2="292.6211"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="107" x="420.5" y="296.6216">&lt;token header&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="527.5" x2="628" y1="292.6211" y2="292.6211"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="325" y="391.9185">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34" x="357" y="407.0513">"jti": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="122" x="391" y="407.0513">&lt;refresh token id&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="513" y="407.0513">",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="357" y="422.1841">"sub": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="106" x="403" y="422.1841">&lt;terminal uuid&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="509" y="422.1841">",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="357" y="437.3169">"iat":</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="129" x="391" y="437.3169">&lt;issue unix epoch&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="520" y="437.3169">,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="37" x="357" y="452.4497">"exp":</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="160" x="398" y="452.4497">&lt;expiration unix epoch&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="558" y="452.4497">,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="357" y="467.5825">"channel": "POS",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="357" y="482.7153">"scope": "offline_access"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="325" y="497.8481">}</text><line style="stroke:#181818;stroke-width:0.5;" x1="320" x2="393" y1="372.2852" y2="372.2852"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="162" x="393" y="376.2856">&lt;refresh token payload&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="555" x2="628" y1="372.2852" y2="372.2852"/><line style="stroke:#181818;stroke-width:1.0;" x1="479" x2="521" y1="536.0469" y2="536.0469"/><line style="stroke:#181818;stroke-width:1.0;" x1="521" x2="521" y1="536.0469" y2="549.0469"/><line style="stroke:#181818;stroke-width:1.0;" x1="480" x2="521" y1="549.0469" y2="549.0469"/><polygon fill="#181818" points="490,545.0469,480,549.0469,490,553.0469" style="stroke:#181818;stroke-width:1.0;"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="9" x="486" y="530.981">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34" x="499" y="530.981">verify</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="533" y="530.981">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45" x="537" y="530.981">header</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="582" y="530.981">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="586" y="530.981">validity</text><path d="M338,519.9141 L338,544.9141 L469,544.9141 L469,529.9141 L459,519.9141 L338,519.9141 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M459,519.9141 L459,529.9141 L469,529.9141 L459,519.9141 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="344" y="536.981">"alg" == "RS256"</text><path d="M215,562.0469 L215,587.0469 L733,587.0469 L733,572.0469 L723,562.0469 L215,562.0469 " fill="#FFA500" style="stroke:#181818;stroke-width:0.5;"/><path d="M723,562.0469 L723,572.0469 L733,572.0469 L723,562.0469 " fill="#FFA500" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="497" x="221" y="579.1138">On verification failure, return HTTP 401 (unauthorized) with specific error body.</text><line style="stroke:#181818;stroke-width:1.0;" x1="479" x2="521" y1="613.3125" y2="613.3125"/><line style="stroke:#181818;stroke-width:1.0;" x1="521" x2="521" y1="613.3125" y2="626.3125"/><line style="stroke:#181818;stroke-width:1.0;" x1="480" x2="521" y1="626.3125" y2="626.3125"/><polygon fill="#181818" points="490,622.3125,480,626.3125,490,630.3125" style="stroke:#181818;stroke-width:1.0;"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="9" x="486" y="608.2466">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34" x="499" y="608.2466">verify</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="533" y="608.2466">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="537" y="608.2466">payload</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="587" y="608.2466">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="591" y="608.2466">validity</text><path d="M101,597.1797 L101,652.1797 L469,652.1797 L469,607.1797 L459,597.1797 L101,597.1797 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M459,597.1797 L459,607.1797 L469,607.1797 L459,597.1797 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="129" x="107" y="614.2466">&lt;issue unix epoch&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="11" x="240" y="614.2466">&lt;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="142" x="255" y="614.2466">&lt;current unix epoch&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="401" y="614.2466">&amp;&amp;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="160" x="107" y="629.3794">&lt;expiration unix epoch&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="11" x="271" y="629.3794">&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="142" x="286" y="629.3794">&lt;current unix epoch&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="432" y="629.3794">&amp;&amp;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177" x="107" y="644.5122">"scope" == "offline_access"</text><path d="M215,662.5781 L215,687.5781 L733,687.5781 L733,672.5781 L723,662.5781 L215,662.5781 " fill="#FFA500" style="stroke:#181818;stroke-width:0.5;"/><path d="M723,662.5781 L723,672.5781 L733,672.5781 L723,662.5781 " fill="#FFA500" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="497" x="221" y="679.645">On verification failure, return HTTP 401 (unauthorized) with specific error body.</text><path d="M159,696.7109 L377,696.7109 L377,703.8438 L367,713.8438 L159,713.8438 L159,696.7109 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="266.7266" style="stroke:#000000;stroke-width:1.5;" width="1085" x="159" y="696.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="173" x="174" y="709.7778">get azure access token</text><polygon fill="#181818" points="832,771.2422,842,775.2422,832,779.2422" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="479" x2="838" y1="775.2422" y2="775.2422"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="9" x="494.5" y="755.0435">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25" x="655.5" y="739.9106">GET</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="159" x="507.5" y="755.0435">${IDENTITY_ENDPOINT}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="666.5" y="755.0435">?api-version=2019-08-01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219" x="558.5" y="770.1763">&amp;resource=https://vault.azure.net</text><path d="M180,728.8438 L180,772.8438 L469,772.8438 L469,738.8438 L459,728.8438 L180,728.8438 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M459,728.8438 L459,738.8438 L469,738.8438 L459,728.8438 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="186" y="761.0435">x-identity-header:</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="145" x="303" y="761.0435">${IDENTITY_HEADER}</text><line style="stroke:#181818;stroke-width:0.5;" x1="181" x2="302" y1="741.4102" y2="741.4102"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45" x="302" y="745.4106">header</text><line style="stroke:#181818;stroke-width:0.5;" x1="347" x2="468" y1="741.4102" y2="741.4102"/><polygon fill="#181818" points="490,800.375,480,804.375,490,808.375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="484" x2="843" y1="804.375" y2="804.375"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="9" x="610.5" y="799.3091">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="623.5" y="799.3091">HTTP</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="655.5" y="799.3091">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="24" x="659.5" y="799.3091">200</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="683.5" y="799.3091">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25" x="687.5" y="799.3091">(ok)</text><path d="M859,788.2422 L859,923.2422 L1223,923.2422 L1223,798.2422 L1213,788.2422 L859,788.2422 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1213,788.2422 L1213,798.2422 L1223,798.2422 L1213,788.2422 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="865" y="820.4419">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="897" y="835.5747">"token_type": "Bearer",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="897" y="850.7075">"expires_on":</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="65" x="984" y="850.7075">don't care</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="1049" y="850.7075">,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="897" y="865.8403">"client_id": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="65" x="972" y="865.8403">don't care</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="1037" y="865.8403">",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="897" y="880.9731">"resource": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="65" x="976" y="880.9731">don't care</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="1041" y="880.9731">"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="897" y="896.106">"access_token": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="190" x="1007" y="896.106">&lt;access token for key vault&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="1197" y="896.106">"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="865" y="911.2388">}</text><line style="stroke:#181818;stroke-width:0.5;" x1="860" x2="1025.5" y1="800.8086" y2="800.8086"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31" x="1025.5" y="804.8091">body</text><line style="stroke:#181818;stroke-width:0.5;" x1="1056.5" x2="1222" y1="800.8086" y2="800.8086"/><path d="M240.5,933.3047 L240.5,958.3047 L707.5,958.3047 L707.5,943.3047 L697.5,933.3047 L240.5,933.3047 " fill="#FFA500" style="stroke:#181818;stroke-width:0.5;"/><path d="M697.5,933.3047 L697.5,943.3047 L707.5,943.3047 L697.5,933.3047 " fill="#FFA500" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="442" x="246.5" y="950.3716">On any failure, return HTTP 500 (server error) with specific error body.</text><path d="M68,981.4375 L334,981.4375 L334,988.5703 L324,998.5703 L68,998.5703 L68,981.4375 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="486.3203" style="stroke:#000000;stroke-width:1.5;" width="1172" x="68" y="981.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="221" x="83" y="994.5044">verify refresh token signature</text><line style="stroke:#181818;stroke-width:1.0;" x1="479" x2="521" y1="1044.8359" y2="1044.8359"/><line style="stroke:#181818;stroke-width:1.0;" x1="521" x2="521" y1="1044.8359" y2="1057.8359"/><line style="stroke:#181818;stroke-width:1.0;" x1="480" x2="521" y1="1057.8359" y2="1057.8359"/><polygon fill="#181818" points="490,1053.8359,480,1057.8359,490,1061.8359" style="stroke:#181818;stroke-width:1.0;"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="9" x="486" y="1032.2036">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="499" y="1024.6372">generate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="557" y="1024.6372">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="47" x="561" y="1024.6372">&lt;string</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="608" y="1024.6372">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="13" x="612" y="1024.6372">to</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="625" y="1024.6372">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="36" x="629" y="1024.6372">verify</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="45" x="534" y="1039.77">refresh</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="579" y="1039.77">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="47" x="583" y="1039.77">token&gt;</text><path d="M111,1013.5703 L111,1178.5703 L469,1178.5703 L469,1023.5703 L459,1013.5703 L111,1013.5703 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M459,1013.5703 L459,1023.5703 L469,1023.5703 L459,1013.5703 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="117" y="1045.77">base64url(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="149" y="1060.9028">sha256(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="181" y="1076.0356">utf8(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="213" y="1091.1685">base64url(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="107" x="281" y="1091.1685">&lt;token header&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="20" x="388" y="1091.1685">) +</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="29" x="213" y="1106.3013">"." +</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="213" y="1121.4341">base64url(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="162" x="281" y="1121.4341">&lt;refresh token payload&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="443" y="1121.4341">)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="181" y="1136.5669">)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="149" y="1151.6997">)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="117" y="1166.8325">)</text><line style="stroke:#181818;stroke-width:0.5;" x1="112" x2="188" y1="1026.1367" y2="1026.1367"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="204" x="188" y="1030.1372">&lt;string to verify refresh token&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="392" x2="468" y1="1026.1367" y2="1026.1367"/><polygon fill="#181818" points="1055,1231.2969,1065,1235.2969,1055,1239.2969" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="479" x2="1061" y1="1235.2969" y2="1235.2969"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="9" x="664.5" y="1215.0981">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34" x="708" y="1199.9653">POST</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="742" y="1199.9653">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="34" x="746" y="1199.9653">&lt;key</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="780" y="1199.9653">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="32" x="784" y="1199.9653">vault</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="816" y="1199.9653">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="31" x="820" y="1199.9653">base</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="27" x="685.5" y="1215.0981">url&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33" x="712.5" y="1215.0981">/keys</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="38" x="745.5" y="1215.0981">/&lt;key</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="783.5" y="1215.0981">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="48" x="787.5" y="1215.0981">name&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="38" x="835.5" y="1215.0981">/&lt;key</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="58" x="677.5" y="1230.231">version&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="735.5" y="1230.231">/verify?api-version=7.4</text><path d="M89,1188.8984 L89,1327.8984 L469,1327.8984 L469,1198.8984 L459,1188.8984 L89,1188.8984 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M459,1188.8984 L459,1198.8984 L469,1198.8984 L459,1188.8984 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="95" y="1221.0981">Authorization: Bearer</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="190" x="235" y="1221.0981">&lt;access token for key vault&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="90" x2="256.5" y1="1201.4648" y2="1201.4648"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45" x="256.5" y="1205.4653">header</text><line style="stroke:#181818;stroke-width:0.5;" x1="301.5" x2="468" y1="1201.4648" y2="1201.4648"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="95" y="1255.3638">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="127" y="1270.4966">"alg": "RS256",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="127" y="1285.6294">"value": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="225" x="184" y="1285.6294">&lt;string to verify for refresh token&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="409" y="1285.6294">",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="127" y="1300.7622">"digest": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="254" x="189" y="1300.7622">&lt;base64url of refresh token signature&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="443" y="1300.7622">"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="95" y="1315.895">}</text><line style="stroke:#181818;stroke-width:0.5;" x1="90" x2="263.5" y1="1235.7305" y2="1235.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31" x="263.5" y="1239.731">body</text><line style="stroke:#181818;stroke-width:0.5;" x1="294.5" x2="468" y1="1235.7305" y2="1235.7305"/><polygon fill="#181818" points="490,1350.0938,480,1354.0938,490,1358.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="484" x2="1066" y1="1354.0938" y2="1354.0938"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="9" x="722" y="1349.0278">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="735" y="1349.0278">HTTP</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="767" y="1349.0278">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="24" x="771" y="1349.0278">200</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="795" y="1349.0278">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25" x="799" y="1349.0278">(ok)</text><path d="M1082,1337.9609 L1082,1411.9609 L1219,1411.9609 L1219,1347.9609 L1209,1337.9609 L1082,1337.9609 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1209,1337.9609 L1209,1347.9609 L1219,1347.9609 L1209,1337.9609 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="1088" y="1370.1606">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="1120" y="1385.2935">"value": true</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="1088" y="1400.4263">}</text><line style="stroke:#181818;stroke-width:0.5;" x1="1083" x2="1135" y1="1350.5273" y2="1350.5273"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31" x="1135" y="1354.5278">body</text><line style="stroke:#181818;stroke-width:0.5;" x1="1166" x2="1218" y1="1350.5273" y2="1350.5273"/><path d="M150,1422.4922 L150,1462.4922 L798,1462.4922 L798,1432.4922 L788,1422.4922 L150,1422.4922 " fill="#FFA500" style="stroke:#181818;stroke-width:0.5;"/><path d="M788,1422.4922 L788,1432.4922 L798,1432.4922 L788,1422.4922 " fill="#FFA500" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="627" x="156" y="1439.5591">On "value" == false in the response body, return HTTP 401 (unauthorized) with specific error body.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="480" x="156" y="1454.6919">On any other failure, return HTTP 500 (server error) with specific error body.</text><path d="M8,1499.7578 L202,1499.7578 L202,1506.8906 L192,1516.8906 L8,1516.8906 L8,1499.7578 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="3679.4375" style="stroke:#000000;stroke-width:1.5;" width="1588" x="8" y="1499.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="149" x="23" y="1512.8247">common processing</text><path d="M27,1530.8906 L177,1530.8906 L177,1538.0234 L167,1548.0234 L27,1548.0234 L27,1530.8906 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="714.1172" style="stroke:#000000;stroke-width:1.5;" width="1287" x="27" y="1530.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="105" x="42" y="1543.9575">verify client id</text><path d="M159,1562.0234 L377,1562.0234 L377,1569.1563 L367,1579.1563 L159,1579.1563 L159,1562.0234 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="266.7266" style="stroke:#000000;stroke-width:1.5;" width="1130" x="159" y="1562.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="173" x="174" y="1575.0903">get azure access token</text><polygon fill="#181818" points="832,1636.5547,842,1640.5547,832,1644.5547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="479" x2="838" y1="1640.5547" y2="1640.5547"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="9" x="494.5" y="1620.356">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25" x="655.5" y="1605.2231">GET</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="159" x="507.5" y="1620.356">${IDENTITY_ENDPOINT}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="666.5" y="1620.356">?api-version=2019-08-01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="244" x="546" y="1635.4888">&amp;resource=https://storage.azure.com</text><path d="M180,1594.1563 L180,1638.1563 L469,1638.1563 L469,1604.1563 L459,1594.1563 L180,1594.1563 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M459,1594.1563 L459,1604.1563 L469,1604.1563 L459,1594.1563 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="186" y="1626.356">x-identity-header:</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="145" x="303" y="1626.356">${IDENTITY_HEADER}</text><line style="stroke:#181818;stroke-width:0.5;" x1="181" x2="302" y1="1606.7227" y2="1606.7227"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45" x="302" y="1610.7231">header</text><line style="stroke:#181818;stroke-width:0.5;" x1="347" x2="468" y1="1606.7227" y2="1606.7227"/><polygon fill="#181818" points="490,1665.6875,480,1669.6875,490,1673.6875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="484" x2="843" y1="1669.6875" y2="1669.6875"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="18" x="606" y="1664.6216">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="628" y="1664.6216">HTTP</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="660" y="1664.6216">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="24" x="664" y="1664.6216">200</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="688" y="1664.6216">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25" x="692" y="1664.6216">(ok)</text><path d="M859,1653.5547 L859,1788.5547 L1268,1788.5547 L1268,1663.5547 L1258,1653.5547 L859,1653.5547 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1258,1653.5547 L1258,1663.5547 L1268,1663.5547 L1258,1653.5547 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="865" y="1685.7544">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="897" y="1700.8872">"token_type": "Bearer",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="897" y="1716.02">"expires_on":</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="65" x="984" y="1716.02">don't care</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="1049" y="1716.02">,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="897" y="1731.1528">"client_id": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="65" x="972" y="1731.1528">don't care</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="1037" y="1731.1528">",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="897" y="1746.2856">"resource": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="65" x="976" y="1746.2856">don't care</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="1041" y="1746.2856">"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="897" y="1761.4185">"access_token": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="235" x="1007" y="1761.4185">&lt;access token for storage account&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="1242" y="1761.4185">"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="865" y="1776.5513">}</text><line style="stroke:#181818;stroke-width:0.5;" x1="860" x2="1048" y1="1666.1211" y2="1666.1211"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31" x="1048" y="1670.1216">body</text><line style="stroke:#181818;stroke-width:0.5;" x1="1079" x2="1267" y1="1666.1211" y2="1666.1211"/><path d="M240.5,1798.6172 L240.5,1823.6172 L707.5,1823.6172 L707.5,1808.6172 L697.5,1798.6172 L240.5,1798.6172 " fill="#FFA500" style="stroke:#181818;stroke-width:0.5;"/><path d="M697.5,1798.6172 L697.5,1808.6172 L707.5,1808.6172 L697.5,1798.6172 " fill="#FFA500" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="442" x="246.5" y="1815.6841">On any failure, return HTTP 500 (server error) with specific error body.</text><path d="M46,1846.75 L208,1846.75 L208,1853.8828 L198,1863.8828 L46,1863.8828 L46,1846.75 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="306.9922" style="stroke:#000000;stroke-width:1.5;" width="1138.5" x="46" y="1846.75"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="117" x="61" y="1859.8169">get client id file</text><polygon fill="#181818" points="947.5,1906.1484,957.5,1910.1484,947.5,1914.1484" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="479" x2="953.5" y1="1910.1484" y2="1910.1484"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="18" x="618.75" y="1897.5161">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25" x="640.75" y="1889.9497">GET</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="665.75" y="1889.9497">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="60" x="669.75" y="1889.9497">&lt;storage</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="729.75" y="1889.9497">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="51" x="733.75" y="1889.9497">account</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="784.75" y="1889.9497">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="31" x="788.75" y="1889.9497">base</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="27" x="641.75" y="1905.0825">url&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45" x="668.75" y="1905.0825">/clients</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="49" x="713.75" y="1905.0825">/&lt;client</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="762.75" y="1905.0825">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="22" x="766.75" y="1905.0825">id&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="788.75" y="1905.0825">.json</text><path d="M67,1878.8828 L67,1937.8828 L469,1937.8828 L469,1888.8828 L459,1878.8828 L67,1878.8828 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M459,1878.8828 L459,1888.8828 L469,1888.8828 L459,1878.8828 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="73" y="1911.0825">x-ms-version: 2019-07-07</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="73" y="1926.2153">Authorization: Bearer</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="235" x="213" y="1926.2153">&lt;access token for storage account&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="68" x2="245.5" y1="1891.4492" y2="1891.4492"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45" x="245.5" y="1895.4497">header</text><line style="stroke:#181818;stroke-width:0.5;" x1="290.5" x2="468" y1="1891.4492" y2="1891.4492"/><polygon fill="#181818" points="490,1960.4141,480,1964.4141,490,1968.4141" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="484" x2="958.5" y1="1964.4141" y2="1964.4141"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="18" x="663.75" y="1959.3481">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="685.75" y="1959.3481">HTTP</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="717.75" y="1959.3481">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="24" x="721.75" y="1959.3481">200</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="745.75" y="1959.3481">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25" x="749.75" y="1959.3481">(ok)</text><path d="M974.5,1948.2813 L974.5,2098.2813 L1163.5,2098.2813 L1163.5,1958.2813 L1153.5,1948.2813 L974.5,1948.2813 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1153.5,1948.2813 L1153.5,1958.2813 L1163.5,1958.2813 L1153.5,1948.2813 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="980.5" y="1980.481">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34" x="1012.5" y="1995.6138">"id": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="71" x="1046.5" y="1995.6138">&lt;client id&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="1117.5" y="1995.6138">",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="1012.5" y="2010.7466">"channel": "POS",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="1012.5" y="2025.8794">"grantTypes": [</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="1044.5" y="2041.0122">"device_code",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="1044.5" y="2056.145">"refresh_token"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="1012.5" y="2071.2778">]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="980.5" y="2086.4106">}</text><line style="stroke:#181818;stroke-width:0.5;" x1="975.5" x2="1053.5" y1="1960.8477" y2="1960.8477"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31" x="1053.5" y="1964.8481">body</text><line style="stroke:#181818;stroke-width:0.5;" x1="1084.5" x2="1162.5" y1="1960.8477" y2="1960.8477"/><path d="M192,2108.4766 L192,2148.4766 L756,2148.4766 L756,2118.4766 L746,2108.4766 L192,2108.4766 " fill="#FFA500" style="stroke:#181818;stroke-width:0.5;"/><path d="M746,2108.4766 L746,2118.4766 L756,2118.4766 L746,2108.4766 " fill="#FFA500" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18" x="198" y="2125.5435">On</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="71" x="220" y="2125.5435">&lt;client id&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="446" x="295" y="2125.5435">file not found, return HTTP 401 (unauthorized) with specific error body.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="480" x="198" y="2140.6763">On any other failure, return HTTP 500 (server error) with specific error body.</text><line style="stroke:#181818;stroke-width:1.0;" x1="479" x2="521" y1="2188.875" y2="2188.875"/><line style="stroke:#181818;stroke-width:1.0;" x1="521" x2="521" y1="2188.875" y2="2201.875"/><line style="stroke:#181818;stroke-width:1.0;" x1="480" x2="521" y1="2201.875" y2="2201.875"/><polygon fill="#181818" points="490,2197.875,480,2201.875,490,2205.875" style="stroke:#181818;stroke-width:1.0;"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="18" x="486" y="2183.8091">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34" x="508" y="2183.8091">verify</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="542" y="2183.8091">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="546" y="2183.8091">channel</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="596" y="2183.8091">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="24" x="600" y="2183.8091">and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="624" y="2183.8091">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34" x="628" y="2183.8091">grant</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="662" y="2183.8091">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="35" x="666" y="2183.8091">types</text><path d="M168.5,2214.875 L168.5,2239.875 L779.5,2239.875 L779.5,2224.875 L769.5,2214.875 L168.5,2214.875 " fill="#FFA500" style="stroke:#181818;stroke-width:0.5;"/><path d="M769.5,2214.875 L769.5,2224.875 L779.5,2224.875 L769.5,2214.875 " fill="#FFA500" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="590" x="174.5" y="2231.9419">On channel or grant type mismatch, return HTTP 401 (unauthorized) with specific error body.</text><path d="M107,2263.0078 L282,2263.0078 L282,2270.1406 L272,2280.1406 L107,2280.1406 L107,2263.0078 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="902.9063" style="stroke:#000000;stroke-width:1.5;" width="986" x="107" y="2263.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="130" x="122" y="2276.0747">get terminal data</text><line style="stroke:#181818;stroke-width:1.0;" x1="479" x2="521" y1="2311.2734" y2="2311.2734"/><line style="stroke:#181818;stroke-width:1.0;" x1="521" x2="521" y1="2311.2734" y2="2324.2734"/><line style="stroke:#181818;stroke-width:1.0;" x1="480" x2="521" y1="2324.2734" y2="2324.2734"/><polygon fill="#181818" points="490,2320.2734,480,2324.2734,490,2328.2734" style="stroke:#181818;stroke-width:1.0;"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="18" x="486" y="2306.2075">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34" x="508" y="2306.2075">POST</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="542" y="2306.2075">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40" x="546" y="2306.2075">/token</text><path d="M128,2295.1406 L128,2699.1406 L469,2699.1406 L469,2305.1406 L459,2295.1406 L128,2295.1406 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M459,2295.1406 L459,2305.1406 L469,2305.1406 L459,2295.1406 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63" x="134" y="2327.3403">client_id=</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="128" x="197" y="2327.3403">&lt;mil-auth client id&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="11" x="325" y="2327.3403">&amp;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202" x="134" y="2342.4731">grant_type=client_credentials&amp;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="134" y="2357.606">client_secret=</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="62" x="226" y="2357.606">&lt;secret&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="129" x2="256.5" y1="2307.707" y2="2307.707"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="256.5" y="2311.7075">request body</text><line style="stroke:#181818;stroke-width:0.5;" x1="340.5" x2="468" y1="2307.707" y2="2307.707"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="134" y="2391.8716">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="166" y="2407.0044">"access_token": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="163" x="276" y="2407.0044">&lt;mil-auth access token&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="439" y="2407.0044">",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="166" y="2422.1372">"token_type": "Bearer",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="166" y="2437.27">"expires_in":</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="163" x="248" y="2437.27">&lt;access token duration&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="134" y="2452.4028">}</text><line style="stroke:#181818;stroke-width:0.5;" x1="129" x2="251.5" y1="2372.2383" y2="2372.2383"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="251.5" y="2376.2388">response body</text><line style="stroke:#181818;stroke-width:0.5;" x1="345.5" x2="468" y1="2372.2383" y2="2372.2383"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="134" y="2486.6685">base64url(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="107" x="202" y="2486.6685">&lt;token header&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="309" y="2486.6685">) + "." +</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="134" y="2501.8013">base64url(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="161" x="202" y="2501.8013">&lt;access token payload&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="363" y="2501.8013">) + "." +</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="253" x="134" y="2516.9341">&lt;base64url of access token signature&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="129" x2="217" y1="2467.0352" y2="2467.0352"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="163" x="217" y="2471.0356">&lt;mil-auth access token&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="380" x2="468" y1="2467.0352" y2="2467.0352"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="134" y="2551.1997">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="166" y="2566.3325">"sub": "mil-auth",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="166" y="2581.4653">"aud": "mil.pagopa.it",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="166" y="2596.5981">"iss": "https:</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="99" x="243" y="2596.5981">//&lt;host name&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="342" y="2596.5981">/mil-auth",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="166" y="2611.731">"iat":</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="129" x="200" y="2611.731">&lt;issue unix epoch&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="329" y="2611.731">,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="37" x="166" y="2626.8638">"exp":</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="160" x="207" y="2626.8638">&lt;expiration unix epoch&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="367" y="2626.8638">,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="166" y="2641.9966">"groups": [</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="198" y="2657.1294">"pos_finder",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="166" y="2672.2622">]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="134" y="2687.395">}</text><line style="stroke:#181818;stroke-width:0.5;" x1="129" x2="218" y1="2531.5664" y2="2531.5664"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="161" x="218" y="2535.5669">&lt;access token payload&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="379" x2="468" y1="2531.5664" y2="2531.5664"/><polygon fill="#181818" points="698,2736.7266,708,2740.7266,698,2744.7266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="479" x2="704" y1="2740.7266" y2="2740.7266"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="18" x="503" y="2728.0942">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25" x="525" y="2720.5278">GET</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="550" y="2720.5278">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="554" y="2720.5278">/terminals</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="68" x="618" y="2720.5278">/&lt;terminal</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="38" x="586.5" y="2735.6606">uuid&gt;</text><path d="M139,2709.4609 L139,2768.4609 L469,2768.4609 L469,2719.4609 L459,2709.4609 L139,2709.4609 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M459,2709.4609 L459,2719.4609 L469,2719.4609 L459,2709.4609 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="145" y="2741.6606">RequestId:</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="86" x="216" y="2741.6606">&lt;request id&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="145" y="2756.7935">Authorization: Bearer</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="163" x="285" y="2756.7935">&lt;mil-auth access token&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="140" x2="281.5" y1="2722.0273" y2="2722.0273"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45" x="281.5" y="2726.0278">header</text><line style="stroke:#181818;stroke-width:0.5;" x1="326.5" x2="468" y1="2722.0273" y2="2722.0273"/><polygon fill="#181818" points="490,2790.9922,480,2794.9922,490,2798.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="484" x2="709" y1="2794.9922" y2="2794.9922"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="18" x="539" y="2789.9263">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="561" y="2789.9263">HTTP</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="593" y="2789.9263">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="24" x="597" y="2789.9263">200</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="621" y="2789.9263">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25" x="625" y="2789.9263">(ok)</text><path d="M725,2778.8594 L725,3094.8594 L1072,3094.8594 L1072,2788.8594 L1062,2778.8594 L725,2778.8594 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1062,2778.8594 L1062,2788.8594 L1072,2788.8594 L1062,2778.8594 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="731" y="2811.0591">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="763" y="2826.1919">"terminalUuid": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="106" x="868" y="2826.1919">&lt;terminal uuid&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="974" y="2826.1919">",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="763" y="2841.3247">"serviceProviderId": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="140" x="894" y="2841.3247">&lt;service provider id&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="1034" y="2841.3247">",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="763" y="2856.4575">"terminalHandlerId": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="142" x="900" y="2856.4575">&lt;terminal handler id&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="1042" y="2856.4575">",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87" x="763" y="2871.5903">"terminalId": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="90" x="850" y="2871.5903">&lt;terminal id&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="940" y="2871.5903">",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="763" y="2886.7231">"enabled":</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="73" x="832" y="2886.7231">&lt;enabled&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="905" y="2886.7231">,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="763" y="2901.856">"payeeCode": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="97" x="858" y="2901.856">&lt;payee code&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="955" y="2901.856">",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56" x="763" y="2916.9888">"slave": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="56" x="819" y="2916.9888">&lt;slave&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="875" y="2916.9888">",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="763" y="2932.1216">"workstations": [</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="158" x="795" y="2947.2544">&lt;array of workstations&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="763" y="2962.3872">],</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="763" y="2977.52">"pagoPa": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="70" x="834" y="2977.52">&lt;pagopa&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="904" y="2977.52">",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="763" y="2992.6528">"pagoPaConf": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="795" y="3007.7856">"pspId": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="60" x="852" y="3007.7856">&lt;psp id&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="912" y="3007.7856">",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="795" y="3022.9185">"brokerId": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="78" x="870" y="3022.9185">&lt;broker id&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="948" y="3022.9185">",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="795" y="3038.0513">"channelId": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="87" x="879" y="3038.0513">&lt;channel id&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="966" y="3038.0513">"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="12" x="763" y="3053.1841">},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="763" y="3068.3169">"idpay": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="57" x="820" y="3068.3169">&lt;idpay&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="877" y="3068.3169">"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="731" y="3083.4497">}</text><line style="stroke:#181818;stroke-width:0.5;" x1="726" x2="883" y1="2791.4258" y2="2791.4258"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31" x="883" y="2795.4263">body</text><line style="stroke:#181818;stroke-width:0.5;" x1="914" x2="1071" y1="2791.4258" y2="2791.4258"/><path d="M210,3105.5156 L210,3160.5156 L738,3160.5156 L738,3115.5156 L728,3105.5156 L210,3105.5156 " fill="#FFA500" style="stroke:#181818;stroke-width:0.5;"/><path d="M728,3105.5156 L728,3115.5156 L738,3115.5156 L728,3105.5156 " fill="#FFA500" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="503" x="216" y="3122.5825">On terminal not found, return HTTP 401 (unauthorized) with specific error body.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18" x="216" y="3137.7153">On</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="73" x="238" y="3137.7153">&lt;enabled&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="408" x="315" y="3137.7153">= false, return HTTP 401 (unauthorized) with specific error body.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="480" x="216" y="3152.8481">On any other failure, return HTTP 500 (server error) with specific error body.</text><path d="M458,3183.9141 L659,3183.9141 L659,3191.0469 L649,3201.0469 L458,3201.0469 L458,3183.9141 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="559.3828" style="stroke:#000000;stroke-width:1.5;" width="668" x="458" y="3183.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="156" x="473" y="3196.981">build tokens payload</text><line style="stroke:#181818;stroke-width:1.0;" x1="479" x2="521" y1="3247.3125" y2="3247.3125"/><line style="stroke:#181818;stroke-width:1.0;" x1="521" x2="521" y1="3247.3125" y2="3260.3125"/><line style="stroke:#181818;stroke-width:1.0;" x1="480" x2="521" y1="3260.3125" y2="3260.3125"/><polygon fill="#181818" points="490,3256.3125,480,3260.3125,490,3264.3125" style="stroke:#181818;stroke-width:1.0;"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="18" x="486" y="3234.6802">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="508" y="3227.1138">generate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="566" y="3227.1138">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="55" x="570" y="3227.1138">&lt;access</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="625" y="3227.1138">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="36" x="629" y="3227.1138">token</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="62" x="555.5" y="3242.2466">payload&gt;</text><path d="M677,3216.0469 L677,3578.0469 L1105,3578.0469 L1105,3226.0469 L1095,3216.0469 L677,3216.0469 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1095,3216.0469 L1095,3226.0469 L1105,3226.0469 L1095,3216.0469 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="683" y="3248.2466">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="715" y="3263.3794">"sub": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="106" x="761" y="3263.3794">&lt;terminal uuid&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="867" y="3263.3794">",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="715" y="3278.5122">"aud": "mil.pagopa.it",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="715" y="3293.645">"iss": "https:</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="99" x="792" y="3293.645">//&lt;host name&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="891" y="3293.645">/mil-auth",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="715" y="3308.7778">"iat":</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="142" x="749" y="3308.7778">&lt;current unix epoch&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="891" y="3308.7778">,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="37" x="715" y="3323.9106">"exp":</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="142" x="756" y="3323.9106">&lt;current unix epoch&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="11" x="902" y="3323.9106">+</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="163" x="917" y="3323.9106">&lt;access token duration&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="1080" y="3323.9106">,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="715" y="3339.0435">"payeeCode": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="95" x="810" y="3339.0435">&lt;payeeCode&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="905" y="3339.0435">",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="715" y="3354.1763">"channel": "POS",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="715" y="3369.3091">"serviceProviderId": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="140" x="846" y="3369.3091">&lt;service provider id&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="986" y="3369.3091">",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="715" y="3384.4419">"terminalHandlerId": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="142" x="852" y="3384.4419">&lt;terminal handler id&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="994" y="3384.4419">",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87" x="715" y="3399.5747">"terminalId": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="90" x="802" y="3399.5747">&lt;terminal id&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="892" y="3399.5747">",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="715" y="3414.7075">"groups": [</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="747" y="3429.8403">"SlavePos",</text><path d="M827.25,3420.9896 L824,3423.7304 L827.25,3426.4063 L827.25,3424.2396 L832.6667,3424.2396 L832.6667,3423.1563 L827.25,3423.1563 L827.25,3420.9896 " fill="#FF0000" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="833.6667" y="3429.8403">&#160;</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="134" x="837.6667" y="3429.8403">Present if &lt;slave&gt; is</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="30" x="975.6667" y="3429.8403">true</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="1005.6667" y="3429.8403">.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="747" y="3444.9731">"NoticePayer",</text><path d="M846.25,3436.1224 L843,3438.8632 L846.25,3441.5391 L846.25,3439.3724 L851.6667,3439.3724 L851.6667,3438.2891 L846.25,3438.2891 L846.25,3436.1224 " fill="#FF0000" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="852.6667" y="3444.9731">&#160;</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="148" x="856.6667" y="3444.9731">Present if &lt;pagopa&gt; is</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="30" x="1008.6667" y="3444.9731">true</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="1038.6667" y="3444.9731">.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="747" y="3460.106">"PayWithIDPay"</text><path d="M851.25,3451.2552 L848,3453.996 L851.25,3456.6719 L851.25,3454.5052 L856.6667,3454.5052 L856.6667,3453.4219 L851.25,3453.4219 L851.25,3451.2552 " fill="#FF0000" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="857.6667" y="3460.106">&#160;</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="135" x="861.6667" y="3460.106">Present if &lt;idpay&gt; is</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="30" x="1000.6667" y="3460.106">true</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="1030.6667" y="3460.106">.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="715" y="3475.2388">],</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="715" y="3490.3716">"pagoPaConf": {</text><path d="M826.25,3481.5208 L823,3484.2617 L826.25,3486.9375 L826.25,3484.7708 L831.6667,3484.7708 L831.6667,3483.6875 L826.25,3483.6875 L826.25,3481.5208 " fill="#FF0000" style="stroke:;stroke-width:0.0;stroke-dasharray:;"/><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="832.6667" y="3490.3716">&#160;</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="148" x="836.6667" y="3490.3716">Present if &lt;pagopa&gt; is</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="30" x="988.6667" y="3490.3716">true</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="1018.6667" y="3490.3716">.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="747" y="3505.5044">"pspId": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="60" x="804" y="3505.5044">&lt;psp id&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="864" y="3505.5044">",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="747" y="3520.6372">"brokerId": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="78" x="822" y="3520.6372">&lt;broker id&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="900" y="3520.6372">",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="747" y="3535.77">"channelId": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="87" x="831" y="3535.77">&lt;channel id&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="918" y="3535.77">"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="715" y="3550.9028">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="683" y="3566.0356">}</text><line style="stroke:#181818;stroke-width:0.5;" x1="678" x2="810.5" y1="3228.6133" y2="3228.6133"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="161" x="810.5" y="3232.6138">&lt;access token payload&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="971.5" x2="1104" y1="3228.6133" y2="3228.6133"/><line style="stroke:#181818;stroke-width:1.0;" x1="479" x2="521" y1="3619.3672" y2="3619.3672"/><line style="stroke:#181818;stroke-width:1.0;" x1="521" x2="521" y1="3619.3672" y2="3632.3672"/><line style="stroke:#181818;stroke-width:1.0;" x1="480" x2="521" y1="3632.3672" y2="3632.3672"/><polygon fill="#181818" points="490,3628.3672,480,3632.3672,490,3636.3672" style="stroke:#181818;stroke-width:1.0;"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="18" x="486" y="3606.7349">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="508" y="3599.1685">generate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="566" y="3599.1685">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="56" x="570" y="3599.1685">&lt;refresh</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="626" y="3599.1685">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="36" x="630" y="3599.1685">token</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="62" x="556" y="3614.3013">payload&gt;</text><path d="M678,3588.1016 L678,3738.1016 L1103,3738.1016 L1103,3598.1016 L1093,3588.1016 L678,3588.1016 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1093,3588.1016 L1093,3598.1016 L1103,3598.1016 L1093,3588.1016 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="684" y="3620.3013">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34" x="716" y="3635.4341">"jti": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="122" x="750" y="3635.4341">&lt;refresh token id&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="872" y="3635.4341">",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="716" y="3650.5669">"sub": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="106" x="762" y="3650.5669">&lt;terminal uuid&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="868" y="3650.5669">",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="716" y="3665.6997">"iat":</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="142" x="750" y="3665.6997">&lt;current unix epoch&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="892" y="3665.6997">,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="37" x="716" y="3680.8325">"exp":</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="142" x="757" y="3680.8325">&lt;current unix epoch&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="11" x="903" y="3680.8325">+</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="164" x="918" y="3680.8325">&lt;refresh token duration&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="716" y="3695.9653">"channel": "POS",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="716" y="3711.0981">"scope": "offline_access"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="684" y="3726.231">}</text><line style="stroke:#181818;stroke-width:0.5;" x1="679" x2="809.5" y1="3600.668" y2="3600.668"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="162" x="809.5" y="3604.6685">&lt;refresh token payload&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="971.5" x2="1102" y1="3600.668" y2="3600.668"/><path d="M291.5,3761.2969 L535.5,3761.2969 L535.5,3768.4297 L525.5,3778.4297 L291.5,3778.4297 L291.5,3761.2969 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="60.2656" style="stroke:#000000;stroke-width:1.5;" width="838" x="291.5" y="3761.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="199" x="306.5" y="3774.3638">retrieve key to sign tokens</text><polygon fill="#90EE90" points="312.5,3793.4297,1088.5,3793.4297,1098.5,3804.4297,1088.5,3816.4297,312.5,3816.4297,302.5,3804.4297,312.5,3793.4297" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="295" x="553" y="3809.4966">See MAIN__retrieve_key_to_sign_tokens.puml</text><path d="M153,3839.5625 L347,3839.5625 L347,3846.6953 L337,3856.6953 L153,3856.6953 L153,3839.5625 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="126.7969" style="stroke:#000000;stroke-width:1.5;" width="547" x="153" y="3839.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="149" x="168" y="3852.6294">build tokens header</text><line style="stroke:#181818;stroke-width:1.0;" x1="479" x2="521" y1="3887.8281" y2="3887.8281"/><line style="stroke:#181818;stroke-width:1.0;" x1="521" x2="521" y1="3887.8281" y2="3900.8281"/><line style="stroke:#181818;stroke-width:1.0;" x1="480" x2="521" y1="3900.8281" y2="3900.8281"/><polygon fill="#181818" points="490,3896.8281,480,3900.8281,490,3904.8281" style="stroke:#181818;stroke-width:1.0;"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="18" x="486" y="3882.7622">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="508" y="3882.7622">generate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="566" y="3882.7622">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="47" x="570" y="3882.7622">&lt;token</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="617" y="3882.7622">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="56" x="621" y="3882.7622">header&gt;</text><path d="M174,3871.6953 L174,3960.6953 L469,3960.6953 L469,3881.6953 L459,3871.6953 L174,3871.6953 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M459,3871.6953 L459,3881.6953 L469,3881.6953 L459,3871.6953 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="180" y="3903.895">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="41" x="212" y="3919.0278">"kid": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="86" x="253" y="3919.0278">&lt;key name&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="100" x="339" y="3919.0278">/&lt;key version&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="439" y="3919.0278">",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="212" y="3934.1606">"alg": "RS256"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="180" y="3949.2935">}</text><line style="stroke:#181818;stroke-width:0.5;" x1="175" x2="268" y1="3884.2617" y2="3884.2617"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="107" x="268" y="3888.2622">&lt;token header&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="375" x2="468" y1="3884.2617" y2="3884.2617"/><path d="M91,3984.3594 L269,3984.3594 L269,3991.4922 L259,4001.4922 L91,4001.4922 L91,3984.3594 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="471.1875" style="stroke:#000000;stroke-width:1.5;" width="1480" x="91" y="3984.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="133" x="106" y="3997.4263">sign access token</text><line style="stroke:#181818;stroke-width:1.0;" x1="479" x2="521" y1="4047.7578" y2="4047.7578"/><line style="stroke:#181818;stroke-width:1.0;" x1="521" x2="521" y1="4047.7578" y2="4060.7578"/><line style="stroke:#181818;stroke-width:1.0;" x1="480" x2="521" y1="4060.7578" y2="4060.7578"/><polygon fill="#181818" points="490,4056.7578,480,4060.7578,490,4064.7578" style="stroke:#181818;stroke-width:1.0;"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="18" x="486" y="4035.1255">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="508" y="4027.5591">generate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="566" y="4027.5591">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="47" x="570" y="4027.5591">&lt;string</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="617" y="4027.5591">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="13" x="621" y="4027.5591">to</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="634" y="4027.5591">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="26" x="638" y="4027.5591">sign</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="664" y="4027.5591">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="17" x="668" y="4027.5591">for</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="44" x="549" y="4042.6919">access</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="593" y="4042.6919">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="47" x="597" y="4042.6919">token&gt;</text><path d="M112,4016.4922 L112,4181.4922 L469,4181.4922 L469,4026.4922 L459,4016.4922 L112,4016.4922 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M459,4016.4922 L459,4026.4922 L469,4026.4922 L459,4016.4922 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="118" y="4048.6919">base64url(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="150" y="4063.8247">sha256(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="182" y="4078.9575">utf8(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="214" y="4094.0903">base64url(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="107" x="282" y="4094.0903">&lt;token header&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="20" x="389" y="4094.0903">) +</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="29" x="214" y="4109.2231">"." +</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="214" y="4124.356">base64url(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="161" x="282" y="4124.356">&lt;access token payload&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="443" y="4124.356">)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="182" y="4139.4888">)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="150" y="4154.6216">)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="118" y="4169.7544">)</text><line style="stroke:#181818;stroke-width:0.5;" x1="113" x2="183.5" y1="4029.0586" y2="4029.0586"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="214" x="183.5" y="4033.0591">&lt;string to sign for access token&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="397.5" x2="468" y1="4029.0586" y2="4029.0586"/><polygon fill="#181818" points="1055,4234.2188,1065,4238.2188,1055,4242.2188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="479" x2="1061" y1="4238.2188" y2="4238.2188"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="18" x="664" y="4218.02">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34" x="693.5" y="4202.8872">POST</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="727.5" y="4202.8872">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34" x="731.5" y="4202.8872">POST</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="765.5" y="4202.8872">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="34" x="769.5" y="4202.8872">&lt;key</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="803.5" y="4202.8872">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="32" x="807.5" y="4202.8872">vault</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="839.5" y="4202.8872">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="31" x="843.5" y="4202.8872">base</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="27" x="690" y="4218.02">url&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33" x="717" y="4218.02">/keys</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="38" x="750" y="4218.02">/&lt;key</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="788" y="4218.02">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="48" x="792" y="4218.02">name&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="38" x="840" y="4218.02">/&lt;key</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="58" x="686" y="4233.1528">version&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="744" y="4233.1528">/sign?api-version=7.4</text><path d="M112,4191.8203 L112,4314.8203 L469,4314.8203 L469,4201.8203 L459,4191.8203 L112,4191.8203 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M459,4191.8203 L459,4201.8203 L469,4201.8203 L459,4191.8203 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="118" y="4224.02">Authorization: Bearer</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="190" x="258" y="4224.02">&lt;access token for key vault&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="113" x2="268" y1="4204.3867" y2="4204.3867"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45" x="268" y="4208.3872">header</text><line style="stroke:#181818;stroke-width:0.5;" x1="313" x2="468" y1="4204.3867" y2="4204.3867"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="118" y="4258.2856">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="150" y="4273.4185">"alg": "RS256",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="150" y="4288.5513">"value": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="214" x="207" y="4288.5513">&lt;string to sign for access token&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="421" y="4288.5513">"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="118" y="4303.6841">}</text><line style="stroke:#181818;stroke-width:0.5;" x1="113" x2="275" y1="4238.6523" y2="4238.6523"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31" x="275" y="4242.6528">body</text><line style="stroke:#181818;stroke-width:0.5;" x1="306" x2="468" y1="4238.6523" y2="4238.6523"/><polygon fill="#181818" points="490,4337.8828,480,4341.8828,490,4345.8828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="484" x2="1066" y1="4341.8828" y2="4341.8828"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="18" x="717.5" y="4336.8169">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="739.5" y="4336.8169">HTTP</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="771.5" y="4336.8169">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="24" x="775.5" y="4336.8169">200</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="799.5" y="4336.8169">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25" x="803.5" y="4336.8169">(ok)</text><path d="M1082,4325.75 L1082,4414.75 L1550,4414.75 L1550,4335.75 L1540,4325.75 L1082,4325.75 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1540,4325.75 L1540,4335.75 L1550,4335.75 L1540,4325.75 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="1088" y="4357.9497">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="41" x="1120" y="4373.0825">"kid": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="136" x="1161" y="4373.0825">&lt;key vault base url&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33" x="1297" y="4373.0825">/keys</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="90" x="1330" y="4373.0825">/&lt;key name&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="100" x="1420" y="4373.0825">/&lt;key version&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="1520" y="4373.0825">",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="1120" y="4388.2153">"value": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="253" x="1177" y="4388.2153">&lt;base64url of access token signature&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="1430" y="4388.2153">"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="1088" y="4403.3481">}</text><line style="stroke:#181818;stroke-width:0.5;" x1="1083" x2="1300.5" y1="4338.3164" y2="4338.3164"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31" x="1300.5" y="4342.3169">body</text><line style="stroke:#181818;stroke-width:0.5;" x1="1331.5" x2="1549" y1="4338.3164" y2="4338.3164"/><path d="M240.5,4425.4141 L240.5,4450.4141 L707.5,4450.4141 L707.5,4435.4141 L697.5,4425.4141 L240.5,4425.4141 " fill="#FFA500" style="stroke:#181818;stroke-width:0.5;"/><path d="M697.5,4425.4141 L697.5,4435.4141 L707.5,4435.4141 L697.5,4425.4141 " fill="#FFA500" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="442" x="246.5" y="4442.481">On any failure, return HTTP 500 (server error) with specific error body.</text><line style="stroke:#181818;stroke-width:1.0;" x1="479" x2="521" y1="4551.2109" y2="4551.2109"/><line style="stroke:#181818;stroke-width:1.0;" x1="521" x2="521" y1="4551.2109" y2="4564.2109"/><line style="stroke:#181818;stroke-width:1.0;" x1="480" x2="521" y1="4564.2109" y2="4564.2109"/><polygon fill="#181818" points="490,4560.2109,480,4564.2109,490,4568.2109" style="stroke:#181818;stroke-width:1.0;"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="18" x="486" y="4515.8794">23</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="55" x="547.5" y="4485.6138">&lt;access</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="602.5" y="4485.6138">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="47" x="606.5" y="4485.6138">token&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="653.5" y="4485.6138">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="11" x="657.5" y="4485.6138">=</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="510.5" y="4500.7466">base64url(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="47" x="578.5" y="4500.7466">&lt;token</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="625.5" y="4500.7466">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="56" x="629.5" y="4500.7466">header&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="685.5" y="4500.7466">)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="690.5" y="4500.7466">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="11" x="694.5" y="4500.7466">+</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="14" x="508" y="4515.8794">"."</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="522" y="4515.8794">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="11" x="526" y="4515.8794">+</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="537" y="4515.8794">&#160;&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="545" y="4515.8794">base64url(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="55" x="613" y="4515.8794">&lt;access</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="668" y="4515.8794">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="36" x="672" y="4515.8794">token</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="62" x="511.5" y="4531.0122">payload&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="573.5" y="4531.0122">)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="578.5" y="4531.0122">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="11" x="582.5" y="4531.0122">+</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="593.5" y="4531.0122">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="14" x="597.5" y="4531.0122">"."</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="611.5" y="4531.0122">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="11" x="615.5" y="4531.0122">+</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="626.5" y="4531.0122">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="74" x="630.5" y="4531.0122">&lt;base64url</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="12" x="520.5" y="4546.145">of</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="532.5" y="4546.145">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="44" x="536.5" y="4546.145">access</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="580.5" y="4546.145">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="36" x="584.5" y="4546.145">token</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="620.5" y="4546.145">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="71" x="624.5" y="4546.145">signature&gt;</text><path d="M90,4576.2109 L271,4576.2109 L271,4583.3438 L261,4593.3438 L90,4593.3438 L90,4576.2109 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="471.1875" style="stroke:#000000;stroke-width:1.5;" width="1481" x="90" y="4576.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="136" x="105" y="4589.2778">sign refresh token</text><line style="stroke:#181818;stroke-width:1.0;" x1="479" x2="521" y1="4639.6094" y2="4639.6094"/><line style="stroke:#181818;stroke-width:1.0;" x1="521" x2="521" y1="4639.6094" y2="4652.6094"/><line style="stroke:#181818;stroke-width:1.0;" x1="480" x2="521" y1="4652.6094" y2="4652.6094"/><polygon fill="#181818" points="490,4648.6094,480,4652.6094,490,4656.6094" style="stroke:#181818;stroke-width:1.0;"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="18" x="486" y="4626.9771">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="508" y="4619.4106">generate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="566" y="4619.4106">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="47" x="570" y="4619.4106">&lt;string</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="617" y="4619.4106">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="13" x="621" y="4619.4106">to</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="634" y="4619.4106">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="26" x="638" y="4619.4106">sign</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="664" y="4619.4106">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="17" x="668" y="4619.4106">for</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="45" x="548.5" y="4634.5435">refresh</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="593.5" y="4634.5435">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="47" x="597.5" y="4634.5435">token&gt;</text><path d="M111,4608.3438 L111,4773.3438 L469,4773.3438 L469,4618.3438 L459,4608.3438 L111,4608.3438 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M459,4608.3438 L459,4618.3438 L469,4618.3438 L459,4608.3438 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="117" y="4640.5435">base64url(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="149" y="4655.6763">sha256(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="181" y="4670.8091">utf8(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="213" y="4685.9419">base64url(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="107" x="281" y="4685.9419">&lt;token header&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="20" x="388" y="4685.9419">) +</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="29" x="213" y="4701.0747">"." +</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="213" y="4716.2075">base64url(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="162" x="281" y="4716.2075">&lt;refresh token payload&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="443" y="4716.2075">)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="181" y="4731.3403">)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="149" y="4746.4731">)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="117" y="4761.606">)</text><line style="stroke:#181818;stroke-width:0.5;" x1="112" x2="182.5" y1="4620.9102" y2="4620.9102"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="215" x="182.5" y="4624.9106">&lt;string to sign for refresh token&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="397.5" x2="468" y1="4620.9102" y2="4620.9102"/><polygon fill="#181818" points="1055,4826.0703,1065,4830.0703,1055,4834.0703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="479" x2="1061" y1="4830.0703" y2="4830.0703"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="18" x="664" y="4809.8716">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34" x="693.5" y="4794.7388">POST</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="727.5" y="4794.7388">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34" x="731.5" y="4794.7388">POST</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="765.5" y="4794.7388">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="34" x="769.5" y="4794.7388">&lt;key</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="803.5" y="4794.7388">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="32" x="807.5" y="4794.7388">vault</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="839.5" y="4794.7388">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="31" x="843.5" y="4794.7388">base</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="27" x="690" y="4809.8716">url&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33" x="717" y="4809.8716">/keys</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="38" x="750" y="4809.8716">/&lt;key</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="788" y="4809.8716">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="48" x="792" y="4809.8716">name&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="38" x="840" y="4809.8716">/&lt;key</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="58" x="686" y="4825.0044">version&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="744" y="4825.0044">/sign?api-version=7.4</text><path d="M112,4783.6719 L112,4906.6719 L469,4906.6719 L469,4793.6719 L459,4783.6719 L112,4783.6719 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M459,4783.6719 L459,4793.6719 L469,4793.6719 L459,4783.6719 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="118" y="4815.8716">Authorization: Bearer</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="190" x="258" y="4815.8716">&lt;access token for key vault&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="113" x2="268" y1="4796.2383" y2="4796.2383"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45" x="268" y="4800.2388">header</text><line style="stroke:#181818;stroke-width:0.5;" x1="313" x2="468" y1="4796.2383" y2="4796.2383"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="118" y="4850.1372">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="150" y="4865.27">"alg": "RS256",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="150" y="4880.4028">"value": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="215" x="207" y="4880.4028">&lt;string to sign for refresh token&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="422" y="4880.4028">"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="118" y="4895.5356">}</text><line style="stroke:#181818;stroke-width:0.5;" x1="113" x2="275" y1="4830.5039" y2="4830.5039"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31" x="275" y="4834.5044">body</text><line style="stroke:#181818;stroke-width:0.5;" x1="306" x2="468" y1="4830.5039" y2="4830.5039"/><polygon fill="#181818" points="490,4929.7344,480,4933.7344,490,4937.7344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="484" x2="1066" y1="4933.7344" y2="4933.7344"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="18" x="717.5" y="4928.6685">26</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="739.5" y="4928.6685">HTTP</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="771.5" y="4928.6685">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="24" x="775.5" y="4928.6685">200</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="799.5" y="4928.6685">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25" x="803.5" y="4928.6685">(ok)</text><path d="M1082,4917.6016 L1082,5006.6016 L1550,5006.6016 L1550,4927.6016 L1540,4917.6016 L1082,4917.6016 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1540,4917.6016 L1540,4927.6016 L1550,4927.6016 L1540,4917.6016 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="1088" y="4949.8013">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="41" x="1120" y="4964.9341">"kid": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="136" x="1161" y="4964.9341">&lt;key vault base url&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33" x="1297" y="4964.9341">/keys</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="90" x="1330" y="4964.9341">/&lt;key name&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="100" x="1420" y="4964.9341">/&lt;key version&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="1520" y="4964.9341">",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="1120" y="4980.0669">"value": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="254" x="1177" y="4980.0669">&lt;base64url of refresh token signature&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="1431" y="4980.0669">"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="1088" y="4995.1997">}</text><line style="stroke:#181818;stroke-width:0.5;" x1="1083" x2="1300.5" y1="4930.168" y2="4930.168"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31" x="1300.5" y="4934.1685">body</text><line style="stroke:#181818;stroke-width:0.5;" x1="1331.5" x2="1549" y1="4930.168" y2="4930.168"/><path d="M240.5,5017.2656 L240.5,5042.2656 L707.5,5042.2656 L707.5,5027.2656 L697.5,5017.2656 L240.5,5017.2656 " fill="#FFA500" style="stroke:#181818;stroke-width:0.5;"/><path d="M697.5,5017.2656 L697.5,5027.2656 L707.5,5027.2656 L697.5,5017.2656 " fill="#FFA500" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="442" x="246.5" y="5034.3325">On any failure, return HTTP 500 (server error) with specific error body.</text><line style="stroke:#181818;stroke-width:1.0;" x1="479" x2="521" y1="5158.1953" y2="5158.1953"/><line style="stroke:#181818;stroke-width:1.0;" x1="521" x2="521" y1="5158.1953" y2="5171.1953"/><line style="stroke:#181818;stroke-width:1.0;" x1="480" x2="521" y1="5171.1953" y2="5171.1953"/><polygon fill="#181818" points="490,5167.1953,480,5171.1953,490,5175.1953" style="stroke:#181818;stroke-width:1.0;"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="18" x="486" y="5115.2974">27</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="56" x="544.5" y="5077.4653">&lt;refresh</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="600.5" y="5077.4653">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="47" x="604.5" y="5077.4653">token&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="651.5" y="5077.4653">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="11" x="655.5" y="5077.4653">=</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="508" y="5092.5981">base64url(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="47" x="576" y="5092.5981">&lt;token</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="623" y="5092.5981">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="56" x="627" y="5092.5981">header&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="683" y="5092.5981">)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="688" y="5092.5981">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="11" x="692" y="5092.5981">+</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="14" x="525" y="5107.731">"."</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="539" y="5107.731">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="11" x="543" y="5107.731">+</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="554" y="5107.731">&#160;&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="562" y="5107.731">base64url(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="56" x="630" y="5107.731">&lt;refresh</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="36" x="528" y="5122.8638">token</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="564" y="5122.8638">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="62" x="568" y="5122.8638">payload&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="630" y="5122.8638">)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="635" y="5122.8638">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="11" x="639" y="5122.8638">+</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="650" y="5122.8638">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="14" x="654" y="5122.8638">"."</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="668" y="5122.8638">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="11" x="672" y="5122.8638">+</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="74" x="516" y="5137.9966">&lt;base64url</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="590" y="5137.9966">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="12" x="594" y="5137.9966">of</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="606" y="5137.9966">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="45" x="610" y="5137.9966">refresh</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="4" x="655" y="5137.9966">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="36" x="659" y="5137.9966">token</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="71" x="570" y="5153.1294">signature&gt;</text><polygon fill="#181818" points="345,5210.3281,335,5214.3281,345,5218.3281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="339" x2="468" y1="5214.3281" y2="5214.3281"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" text-decoration="underline" textLength="18" x="346" y="5209.2622">28</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="368" y="5209.2622">HTTP</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="400" y="5209.2622">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="24" x="404" y="5209.2622">200</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="428" y="5209.2622">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25" x="432" y="5209.2622">(ok)</text><path d="M484,5198.1953 L484,5298.1953 L782,5298.1953 L782,5208.1953 L772,5198.1953 L484,5198.1953 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M772,5198.1953 L772,5208.1953 L782,5208.1953 L772,5198.1953 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="490" y="5215.2622">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="522" y="5230.395">"access_token": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="106" x="632" y="5230.395">&lt;access token&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="738" y="5230.395">",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="522" y="5245.5278">"refresh_token": "</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="107" x="633" y="5245.5278">&lt;refresh token&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="740" y="5245.5278">",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="522" y="5260.6606">"token_type": "Bearer",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="522" y="5275.7935">"expires_in":</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="163" x="604" y="5275.7935">&lt;access token duration&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="490" y="5290.9263">}</text><!--SRC=[RP8nRy8m48Nd-5SS6QfM58mweiBGgPsAMdRBn0SvaTYfxQ16LVzx7Jj51374qjrxUNV-v0dfeceLYbhg3kPpNfYwDfgx8-bvqzOLcumSil36kgImKD19UeJ6ECR20RCrr5G9sVeIfbDOmkRzSmlScoDgbcaJl1NkFSio8KgK2gqGeVZ0hnQTVrDBuFpPfWf8hJcFrfrHNJGUhDHU-Ax1bSMzHLUAc7qNjA8Y32AfLSX8HOhenP5x5OV41iH6d8DQGRyXkxho2ItjEp5Ak8LcrrAbalmFwCnY5i14FhF0v7MxtS3JOW7tvlWmKB5qA7iiF-7BSbaKw5pAofUGXtrJwxnk_XYDewK6v_ND1cii8xhUzuBIeXqa_6ue_2AeZxYQ1QgrqfD9ZBBVIquABr_07m00]--></g></svg>